<?php
$menu_items = [
    [
        'title' => 'Personal',
        'sub_items' => [
            [
                'name' => 'Dashboard',
                'icon' => 'ri-dashboard-2-line',
                'slug' => ''
            ],
            [
                'name' => 'To Do',
                'icon' => 'ri-task-line',
                'slug' => 'todo'
            ],
            [
                'name' => 'Note',
                'icon' => 'ri-sticky-note-line',
                'slug' => 'note'
            ],
            [
                'name' => 'Daily Checklist',
                'icon' => 'ri-calendar-check-line',
                'slug' => 'daily-checklist'
            ],
            [
                'name' => 'Finance',
                'icon' => 'ri-wallet-3-line',
                'slug' => 'finance'
            ],
            [
                'name' => 'Subscription',
                'icon' => 'ri-calendar-check-line',
                'slug' => 'subscription'
            ],
            [
                'name' => 'Plan',
                'icon' => 'ri-file-text-line',
                'slug' => 'plan'
            ],
            [
                'name' => 'Calendar',
                'icon' => 'ri-calendar-event-fill',
                'slug' => 'calendar'
            ],
        ]
    ],
    [
        'title' => 'Tech Stack',
        'sub_items' => [
            [
                'name' => 'Wordpress',
                'icon' => 'mdi mdi-wordpress',
                'slug' => 'wordpress'
            ],
            [
                'name' => 'ReactJS',
                'icon' => 'mdi mdi-react',
                'slug' => 'reactjs'
            ],
            [
                'name' => 'Salesforce',
                'icon' => 'mdi mdi-salesforce',
                'slug' => 'salesforce'
            ],
            [
                'name' => 'PHP',
                'icon' => 'mdi mdi-language-php',
                'slug' => 'php'
            ],
            [
                'name' => 'MySql',
                'icon' => 'mdi mdi-database-outline',
                'slug' => 'mysql'
            ],
            [
                'name' => 'English',
                'icon' => 'mdi mdi-google-translate',
                'slug' => 'english'
            ],
        ]
    ],
    [
        'title' => 'App',
        'sub_items' => [
            [
                'name' => 'Bookmark',
                'icon' => 'ri-bookmark-line',
                'slug' => 'bookmark'
            ],
            [
                'name' => 'Short Link',
                'icon' => 'ri-link-m',
                'slug' => 'short-link'
            ],
            [
                'name' => 'Generate QR',
                'icon' => 'ri-qr-code-line',
                'slug' => 'generate-qr'
            ],
            [
                'name' => 'AI Chat',
                'icon' => 'ri-chat-3-line',
                'slug' => 'ai-chat'
            ],
            [
                'name' => 'File Manager',
                'icon' => 'ri-folder-5-line',
                'slug' => 'file-manager'
            ]
        ]
    ],
    [
        'title' => 'Work',
        'sub_items' => [
            [
                'name' => 'Projects',
                'icon' => 'ri-folder-5-line',
                'slug' => 'projects'
            ],
            [
                'name' => 'Report Working',
                'icon' => 'ri-clipboard-line',
                'slug' => 'report-working'
            ],
            [
                'name' => 'Maintain Web',
                'icon' => 'ri-global-line',
                'slug' => 'maintain-web'
            ],
            [
                'name' => 'SEO Checklist',
                'icon' => 'ri-search-line',
                'slug' => 'seo-checklist'
            ],
            [
                'name' => 'Web Dev Checklist',
                'icon' => 'ri-tools-line',
                'slug' => 'web-dev-checklist'
            ],
            [
                'name' => 'Web Secure Checklist',
                'icon' => 'ri-shield-line',
                'slug' => 'web-secure-checklist'
            ]
        ]
    ],
    [
        'title' => 'Development',
        'sub_items' => [
            [
                'name' => 'Code',
                'icon' => 'ri-code-line',
                'slug' => 'code'
            ],
            [
                'name' => 'Tip',
                'icon' => 'ri-lightbulb-line',
                'slug' => 'tip'
            ],
            [
                'name' => 'Book',
                'icon' => 'ri-book-open-line',
                'slug' => 'book'
            ],
            [
                'name' => 'Git',
                'icon' => 'ri-git-merge-line',
                'slug' => 'git'
            ],
            [
                'name' => 'Course',
                'icon' => 'ri-graduation-cap-line',
                'slug' => 'course'
            ],
            [
                'name' => 'Blog',
                'icon' => 'ri-article-line',
                'slug' => 'blog'
            ]
        ]
    ],
    [
        'title' => 'Network',
        'sub_items' => [
            [
                'name' => 'Lead',
                'icon' => 'ri-file-user-line',
                'slug' => 'lead'
            ],
            [
                'name' => 'Website',
                'icon' => 'ri-links-line',
                'slug' => 'website'
            ]
        ]
    ],
    [
        'title' => 'Game',
        'sub_items' => [
            [
                'name' => 'Football Manager',
                'icon' => 'ri-football-line',
                'slug' => 'football-manager'
            ]
        ]
    ],
    [
        'title' => 'My Account',
        'sub_items' => [
            [
                'name' => 'Settings',
                'icon' => 'ri-settings-3-line',
                'slug' => 'my-settings',
            ],
            [
                'name' => 'Notifications',
                'icon' => 'ri-notification-2-line',
                'slug' => 'my-notification',
            ],
            [
                'name' => 'Package',
                'icon' => 'ri-star-s-line',
                'slug' => 'my-package',
            ],
            [
                'name' => 'Profile',
                'icon' => 'ri-user-settings-line',
                'slug' => 'my-profile',
            ],
        ]
    ],
    [
        'title' => 'System',
        'sub_items' => [
            [
                'name' => 'API Log',
                'icon' => 'ri-file-list-2-line',
                'slug' => 'api-log'
            ],
            [
                'name' => 'User Management',
                'icon' => 'ri-user-line',
                'slug' => 'user-management'
            ],
            [
                'name' => 'Settings',
                'icon' => 'ri-settings-2-line',
                'slug' => 'settings'
            ],
            [
                'name' => 'Mail Log',
                'icon' => 'ri-mail-line',
                'slug' => 'mail'
            ],
            [
                'name' => 'Database',
                'icon' => 'ri-database-2-line',
                'slug' => 'database'
            ]
        ]
    ]

];
?>

<!-- ========== App Menu ========== -->
<div class="app-menu navbar-menu">
    <!-- LOGO -->
    <div class="navbar-brand-box">
        <!-- Dark Logo-->
        <a href="<?= home_url('app/') ?>" class="logo logo-dark">
            <span class="logo-sm">
                <img src="<?= home_url("assets/images/logo-sm.png") ?>" alt="" width="32" height="32">
            </span>
            <span class="logo-lg">
                <img src="<?= home_url("assets/images/dark-logo.png") ?>" alt="" height="29">
            </span>
        </a>
        <!-- Light Logo-->
        <a href="<?= home_url('app/') ?>" class="logo logo-light">
            <span class="logo-sm">
                <img src="<?= home_url("assets/images/logo-sm.png") ?>" alt="" width="32" height="32">
            </span>
            <span class="logo-lg">
                <img src="<?= home_url("assets/images/light-logo.png") ?>" alt="" height="29">
            </span>
        </a>
        <button type="button" class="btn btn-sm p-0 fs-20 header-item float-end btn-vertical-sm-hover"
            id="vertical-hover">
            <i class="ri-record-circle-line"></i>
        </button>
    </div>

    <div id="scrollbar">
        <div class="container-fluid">

            <div id="two-column-menu">
            </div>
            <ul class="navbar-nav" id="navbar-nav">
                <?php
                foreach ($menu_items as $category) {
                    echo '<li class="menu-title"><span>' . $category['title'] . '</span></li>';

                    foreach ($category['sub_items'] as $item) {
                        $pageData = getPageData($item['slug'], $user_role);
                        // Generate active class based on the slug
                        $active_class = activeClassName($item['slug']);

                        // Generate the URL dynamically based on the slug
                        $url = home_url("app/{$item['slug']}");

                        echo '<li class="nav-item">
                                    <a class="nav-link menu-link ' . $active_class . '" href="' . $url . '">
                                        <i class="' . $item['icon'] . '"></i> <span>' . $item['name'] . '</span>
                                        ' . (empty($pageData['isAccessible']) ? '<i class="mdi mdi-lock ms-auto"></i>' : '') . '
                                    </a>
                                  </li>';
                    }
                }
                ?>
            </ul>
        </div>
        <!-- Sidebar -->
    </div>

    <div class="sidebar-background"></div>
</div>
<!-- Left Sidebar End -->
<!-- Vertical Overlay-->
<div class="vertical-overlay"></div>